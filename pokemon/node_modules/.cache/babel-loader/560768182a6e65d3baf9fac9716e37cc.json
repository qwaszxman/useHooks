{"ast":null,"code":"import _slicedToArray from \"C:\\\\_\\\\pokedex\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\_\\\\pokedex\\\\src\\\\ui\\\\page\\\\cmp-page.js\";\nimport React, { Component, useReducer } from 'react';\nimport hardtack from 'hardtack';\nimport Pokemon from '../pokemon/cnt-pokemon';\nimport Search from '../search/cmp-search';\nimport ga from '../../utils/ga';\nvar initialState = {\n  searchString: '',\n  pokemonsIds: [],\n  error: null\n};\n\nvar reducer = function reducer(state, action) {\n  switch (action.type) {\n    case value:\n      break;\n\n    default:\n      return state;\n  }\n};\n\nvar Page = function Page(props) {\n  var _useReducer = useReducer(reducer, initialState, init),\n      _useReducer2 = _slicedToArray(_useReducer, 2),\n      state = _useReducer2[0],\n      dispatch = _useReducer2[1];\n\n  componentDidMount = function componentDidMount() {\n    return props.getPokemons().then(function (action) {\n      if (action.error) {\n        return setState({\n          error: action.payload.message\n        });\n      }\n\n      var searchString = hardtack.get('searchString');\n      var pokemonsById = props.pokemonsById,\n          pokemonsAllIds = props.pokemonsAllIds;\n\n      if (!searchString) {\n        return setState({\n          pokemonsIds: pokemonsAllIds\n        });\n      }\n\n      var pokemonsIds = pokemonsAllIds.filter(function (pokemonId) {\n        var pokemon = pokemonsById[pokemonId];\n        return pokemon.name.includes(searchString);\n      });\n      setState({\n        pokemonsIds: pokemonsIds,\n        searchString: searchString\n      });\n    });\n  };\n\n  ga.pageview(window.location.pathname + window.location.search);\n\n  handleSearch = function handleSearch(event) {\n    var value = event.currentTarget.value.toLowerCase().trim();\n    var pokemonsById = props.pokemonsById,\n        pokemonsAllIds = props.pokemonsAllIds;\n    hardtack.set('searchString', value, {\n      maxAge: '31536000'\n    });\n\n    if (value === '') {\n      return setState({\n        pokemonsIds: pokemonsAllIds,\n        searchString: value\n      });\n    }\n\n    var pokemonsIds = pokemonsAllIds.filter(function (pokemonId) {\n      var pokemon = pokemonsById[pokemonId];\n      return pokemon.name.includes(value);\n    });\n    setState({\n      pokemonsIds: pokemonsIds,\n      searchString: value\n    });\n  };\n\n  var searchString = state.searchString,\n      pokemonsIds = state.pokemonsIds,\n      error = state.error;\n  var isFetched = props.isFetched;\n  var pokemons = pokemonsIds.map(function (pokemonId) {\n    return React.createElement(\"li\", {\n      className: \"pokemons__item\",\n      key: pokemonId,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, React.createElement(Pokemon, {\n      id: pokemonId,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }));\n  });\n  return React.createElement(\"div\", {\n    className: \"page\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, error && React.createElement(\"div\", {\n    className: \"page__error\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }, error), React.createElement(\"div\", {\n    className: \"page__search\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }, React.createElement(Search, {\n    onChange: handleSearch,\n    value: searchString,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  })), isFetched ? React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, \"Loading...\") : React.createElement(\"ul\", {\n    className: \"pokemons\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }, pokemons));\n};\n\nexport default Page;","map":{"version":3,"sources":["C:/_/pokedex/src/ui/page/cmp-page.js"],"names":["React","Component","useReducer","hardtack","Pokemon","Search","ga","initialState","searchString","pokemonsIds","error","reducer","state","action","type","value","Page","props","init","dispatch","componentDidMount","getPokemons","then","setState","payload","message","get","pokemonsById","pokemonsAllIds","filter","pokemonId","pokemon","name","includes","pageview","window","location","pathname","search","handleSearch","event","currentTarget","toLowerCase","trim","set","maxAge","isFetched","pokemons","map"],"mappings":"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","sourcesContent":["import React, { Component, useReducer } from 'react'\r\nimport hardtack from 'hardtack'\r\nimport Pokemon from '../pokemon/cnt-pokemon'\r\nimport Search from '../search/cmp-search'\r\nimport ga from '../../utils/ga'\r\n\r\nconst initialState = {\r\n  searchString: '',\r\n  pokemonsIds: [],\r\n  error: null\r\n}\r\n\r\nconst reducer = (state, action) => {\r\n\r\n  switch (action.type) {\r\n    case value:\r\n      \r\n      break;\r\n  \r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nconst Page = (props) => {\r\n  const [state, dispatch] = useReducer(reducer, initialState, init);\r\n  \r\n  \r\n  componentDidMount= () => \r\n    props.getPokemons().then(action => {\r\n      if (action.error) {\r\n        return setState({\r\n          error: action.payload.message\r\n        })\r\n      }\r\n\r\n      const searchString = hardtack.get('searchString')\r\n      const { pokemonsById, pokemonsAllIds } = props\r\n\r\n      if (!searchString) {\r\n        return setState({\r\n          pokemonsIds: pokemonsAllIds\r\n        })\r\n      }\r\n\r\n      const pokemonsIds = pokemonsAllIds.filter(pokemonId => {\r\n        const pokemon = pokemonsById[pokemonId]\r\n\r\n        return pokemon.name.includes(searchString)\r\n      })\r\n\r\n      setState({\r\n        pokemonsIds,\r\n        searchString\r\n      })\r\n    })\r\n\r\n    ga.pageview(window.location.pathname + window.location.search)\r\n \r\n    handleSearch = event => {\r\n    const value = event.currentTarget.value.toLowerCase().trim()\r\n    const { pokemonsById, pokemonsAllIds } = props\r\n\r\n    hardtack.set('searchString', value, {\r\n      maxAge: '31536000'\r\n    })\r\n\r\n    if (value === '') {\r\n      return setState({\r\n        pokemonsIds: pokemonsAllIds,\r\n        searchString: value\r\n      })\r\n    }\r\n\r\n    const pokemonsIds = pokemonsAllIds.filter(pokemonId => {\r\n      const pokemon = pokemonsById[pokemonId]\r\n\r\n      return pokemon.name.includes(value)\r\n    })\r\n\r\n    setState({\r\n      pokemonsIds,\r\n      searchString: value\r\n    })\r\n  }\r\n\r\n    const { searchString, pokemonsIds, error } = state\r\n    const { isFetched } = props\r\n\r\n    const pokemons = pokemonsIds.map(pokemonId => {\r\n      return (\r\n        <li className=\"pokemons__item\" key={pokemonId}>\r\n          <Pokemon id={pokemonId} />\r\n        </li>\r\n      )\r\n    })\r\n\r\n    return (\r\n      <div className=\"page\">\r\n        {error && <div className=\"page__error\">{error}</div>}\r\n        <div className=\"page__search\">\r\n          <Search onChange={handleSearch} value={searchString} />\r\n        </div>\r\n        {isFetched ? (\r\n          <p>Loading...</p>\r\n        ) : (\r\n          <ul className=\"pokemons\">{pokemons}</ul>\r\n        )}\r\n      </div>\r\n    )\r\n        }\r\nexport default Page\r\n"]},"metadata":{},"sourceType":"module"}