{"ast":null,"code":"var _jsxFileName = \"C:\\\\_\\\\pokedex\\\\src\\\\ui\\\\page\\\\cmp-page.js\";\nimport React, { Component } from 'react';\nimport hardtack from 'hardtack';\nimport Pokemon from '../pokemon/cnt-pokemon';\nimport Search from '../search/cmp-search';\nimport ga from '../../utils/ga';\n\nvar Page = function Page(props) {\n  state = {\n    searchString: '',\n    pokemonsIds: [],\n    error: null\n  };\n\n  componentDidMount = function componentDidMount() {\n    return props.getPokemons().then(function (action) {\n      if (action.error) {\n        return setState({\n          error: action.payload.message\n        });\n      }\n\n      var searchString = hardtack.get('searchString');\n      var pokemonsById = props.pokemonsById,\n          pokemonsAllIds = props.pokemonsAllIds;\n\n      if (!searchString) {\n        return setState({\n          pokemonsIds: pokemonsAllIds\n        });\n      }\n\n      var pokemonsIds = pokemonsAllIds.filter(function (pokemonId) {\n        var pokemon = pokemonsById[pokemonId];\n        return pokemon.name.includes(searchString);\n      });\n      setState({\n        pokemonsIds: pokemonsIds,\n        searchString: searchString\n      });\n    });\n  };\n\n  ga.pageview(window.location.pathname + window.location.search);\n\n  handleSearch = function handleSearch(event) {\n    var value = event.currentTarget.value.toLowerCase().trim();\n    var pokemonsById = props.pokemonsById,\n        pokemonsAllIds = props.pokemonsAllIds;\n    hardtack.set('searchString', value, {\n      maxAge: '31536000'\n    });\n\n    if (value === '') {\n      return setState({\n        pokemonsIds: pokemonsAllIds,\n        searchString: value\n      });\n    }\n\n    var pokemonsIds = pokemonsAllIds.filter(function (pokemonId) {\n      var pokemon = pokemonsById[pokemonId];\n      return pokemon.name.includes(value);\n    });\n    setState({\n      pokemonsIds: pokemonsIds,\n      searchString: value\n    });\n  };\n\n  var _state = state,\n      searchString = _state.searchString,\n      pokemonsIds = _state.pokemonsIds,\n      error = _state.error;\n  var isFetched = props.isFetched;\n  var pokemons = pokemonsIds.map(function (pokemonId) {\n    return React.createElement(\"li\", {\n      className: \"pokemons__item\",\n      key: pokemonId,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, React.createElement(Pokemon, {\n      id: pokemonId,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }));\n  });\n  return React.createElement(\"div\", {\n    className: \"page\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, error && React.createElement(\"div\", {\n    className: \"page__error\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, error), React.createElement(\"div\", {\n    className: \"page__search\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, React.createElement(Search, {\n    onChange: handleSearch,\n    value: searchString,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  })), isFetched ? React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, \"Loading...\") : React.createElement(\"ul\", {\n    className: \"pokemons\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, pokemons));\n};\n\nexport default Page;","map":{"version":3,"sources":["C:/_/pokedex/src/ui/page/cmp-page.js"],"names":["React","Component","hardtack","Pokemon","Search","ga","Page","props","state","searchString","pokemonsIds","error","componentDidMount","getPokemons","then","action","setState","payload","message","get","pokemonsById","pokemonsAllIds","filter","pokemonId","pokemon","name","includes","pageview","window","location","pathname","search","handleSearch","event","value","currentTarget","toLowerCase","trim","set","maxAge","isFetched","pokemons","map"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport hardtack from 'hardtack'\r\nimport Pokemon from '../pokemon/cnt-pokemon'\r\nimport Search from '../search/cmp-search'\r\nimport ga from '../../utils/ga'\r\n\r\n\r\nconst Page = (props) => {\r\n  state = {\r\n    searchString: '',\r\n    pokemonsIds: [],\r\n    error: null\r\n  }\r\n\r\n  componentDidMount= () => \r\n    props.getPokemons().then(action => {\r\n      if (action.error) {\r\n        return setState({\r\n          error: action.payload.message\r\n        })\r\n      }\r\n\r\n      const searchString = hardtack.get('searchString')\r\n      const { pokemonsById, pokemonsAllIds } = props\r\n\r\n      if (!searchString) {\r\n        return setState({\r\n          pokemonsIds: pokemonsAllIds\r\n        })\r\n      }\r\n\r\n      const pokemonsIds = pokemonsAllIds.filter(pokemonId => {\r\n        const pokemon = pokemonsById[pokemonId]\r\n\r\n        return pokemon.name.includes(searchString)\r\n      })\r\n\r\n      setState({\r\n        pokemonsIds,\r\n        searchString\r\n      })\r\n    })\r\n\r\n    ga.pageview(window.location.pathname + window.location.search)\r\n \r\n    handleSearch = event => {\r\n    const value = event.currentTarget.value.toLowerCase().trim()\r\n    const { pokemonsById, pokemonsAllIds } = props\r\n\r\n    hardtack.set('searchString', value, {\r\n      maxAge: '31536000'\r\n    })\r\n\r\n    if (value === '') {\r\n      return setState({\r\n        pokemonsIds: pokemonsAllIds,\r\n        searchString: value\r\n      })\r\n    }\r\n\r\n    const pokemonsIds = pokemonsAllIds.filter(pokemonId => {\r\n      const pokemon = pokemonsById[pokemonId]\r\n\r\n      return pokemon.name.includes(value)\r\n    })\r\n\r\n    setState({\r\n      pokemonsIds,\r\n      searchString: value\r\n    })\r\n  }\r\n\r\n    const { searchString, pokemonsIds, error } = state\r\n    const { isFetched } = props\r\n\r\n    const pokemons = pokemonsIds.map(pokemonId => {\r\n      return (\r\n        <li className=\"pokemons__item\" key={pokemonId}>\r\n          <Pokemon id={pokemonId} />\r\n        </li>\r\n      )\r\n    })\r\n\r\n    return (\r\n      <div className=\"page\">\r\n        {error && <div className=\"page__error\">{error}</div>}\r\n        <div className=\"page__search\">\r\n          <Search onChange={handleSearch} value={searchString} />\r\n        </div>\r\n        {isFetched ? (\r\n          <p>Loading...</p>\r\n        ) : (\r\n          <ul className=\"pokemons\">{pokemons}</ul>\r\n        )}\r\n      </div>\r\n    )\r\n        }\r\nexport default Page\r\n"]},"metadata":{},"sourceType":"module"}