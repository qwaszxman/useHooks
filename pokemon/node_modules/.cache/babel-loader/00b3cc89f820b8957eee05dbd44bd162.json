{"ast":null,"code":"import _slicedToArray from \"C:\\\\_\\\\pokedex\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\_\\\\pokedex\\\\src\\\\ui\\\\page\\\\cmp-page.js\";\nimport React, { Component, useReducer, useEffect } from 'react';\nimport hardtack from 'hardtack';\nimport Pokemon from '../pokemon/cnt-pokemon';\nimport Search from '../search/cmp-search';\nimport ga from '../../utils/ga';\nvar initialState = {\n  searchString: '',\n  pokemonsIds: [],\n  error: null\n};\n\nvar PageActions = function PageActions() {\n  var setError = function setError(data) {\n    return {\n      type: \"error\",\n      data: data\n    };\n  };\n\n  var reset = function reset(data) {\n    return {\n      type: \"reset\",\n      data: data\n    };\n  };\n\n  var update = function update(data) {\n    return {\n      type: \"update\",\n      data: data\n    };\n  };\n\n  return {\n    setError: setError,\n    reset: reset,\n    update: update\n  };\n};\n\nvar PageReducer = function PageReducer(state, action) {\n  switch (action.type) {\n    case \"error\":\n      return state;\n\n    case \"update\":\n      return state;\n\n    case \"error\":\n    default:\n      return state;\n  }\n};\n\nvar Page = function Page(props) {\n  var _useReducer = useReducer(PageReducer, initialState),\n      _useReducer2 = _slicedToArray(_useReducer, 2),\n      state = _useReducer2[0],\n      dispatch = _useReducer2[1];\n\n  useEffect(function () {\n    props.getPokemons().then(function (action) {\n      if (action.error) {\n        dispatch(PageActions.setError(acion.payload.message));\n      }\n\n      var searchString = hardtack.get('searchString');\n      var pokemonsById = props.pokemonsById,\n          pokemonsAllIds = props.pokemonsAllIds;\n\n      if (!searchString) {\n        dispatch(PageActions.reset(pokemonsAllIds));\n      }\n\n      var pokemonsIds = pokemonsAllIds.filter(function (pokemonId) {\n        var pokemon = pokemonsById[pokemonId];\n        return pokemon.name.includes(searchString);\n      });\n      dispatch(PageActions.update({\n        ids: pokemonsIds,\n        searchString: searchString\n      }));\n    });\n    ga.pageview(window.location.pathname + window.location.search);\n  });\n\n  var handleSearch = function handleSearch(e) {\n    var target = e.target,\n        currentTarget = e.currentTarget;\n    var value = currentTarget.value.toLowerCase().trim();\n    var pokemonsById = props.pokemonsById,\n        pokemonsAllIds = props.pokemonsAllIds;\n    hardtack.set('searchString', value, {\n      maxAge: '31536000'\n    });\n\n    if (value === '') {\n      dispatch(PageActions.update);\n      dispatch(PageActions.update({\n        ids: pokemonsIds,\n        searchString: searchString\n      }));\n    }\n\n    var pokemonsIds = pokemonsAllIds.filter(function (pokemonId) {\n      var pokemon = pokemonsById[pokemonId];\n      return pokemon.name.includes(value);\n    });\n    dispatch(PageActions.update({\n      ids: pokemonsIds,\n      searchString: value\n    }));\n  };\n\n  var searchString = state.searchString,\n      pokemonsIds = state.pokemonsIds,\n      error = state.error;\n  var isFetched = props.isFetched;\n  var pokemons = pokemonsIds.map(function (pokemonId) {\n    return React.createElement(\"li\", {\n      className: \"pokemons__item\",\n      key: pokemonId,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, React.createElement(Pokemon, {\n      id: pokemonId,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }));\n  });\n  return React.createElement(\"div\", {\n    className: \"page\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, error && React.createElement(\"div\", {\n    className: \"page__error\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, error), React.createElement(\"div\", {\n    className: \"page__search\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }, React.createElement(Search, {\n    onChange: handleSearch,\n    value: searchString,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  })), isFetched ? React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }, \"Loading...\") : React.createElement(\"ul\", {\n    className: \"pokemons\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }, pokemons));\n};\n\nexport default Page;","map":{"version":3,"sources":["C:/_/pokedex/src/ui/page/cmp-page.js"],"names":["React","Component","useReducer","useEffect","hardtack","Pokemon","Search","ga","initialState","searchString","pokemonsIds","error","PageActions","setError","data","type","reset","update","PageReducer","state","action","Page","props","dispatch","getPokemons","then","acion","payload","message","get","pokemonsById","pokemonsAllIds","filter","pokemonId","pokemon","name","includes","ids","pageview","window","location","pathname","search","handleSearch","e","target","currentTarget","value","toLowerCase","trim","set","maxAge","isFetched","pokemons","map"],"mappings":"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","sourcesContent":["import React, { Component, useReducer, useEffect } from 'react'\r\nimport hardtack from 'hardtack'\r\nimport Pokemon from '../pokemon/cnt-pokemon'\r\nimport Search from '../search/cmp-search'\r\nimport ga from '../../utils/ga'\r\n\r\nconst initialState = {\r\n  searchString: '',\r\n  pokemonsIds: [],\r\n  error: null\r\n}\r\n\r\nconst PageActions = () => {\r\n  const setError = (data) => { return { type: \"error\", data: data } }\r\n  const reset = (data) => { return { type: \"reset\", data: data } }\r\n  const update = (data) => { return { type: \"update\", data: data } }\r\n  return {\r\n    setError,\r\n    reset,\r\n    update,\r\n  }\r\n\r\n}\r\n\r\nconst PageReducer = (state, action) => {\r\n  switch (action.type) {\r\n    case \"error\":\r\n      return state;\r\n\r\n    case \"update\":\r\n      return state;\r\n\r\n      case \"error\":\r\n        default:\r\n\r\n      return state;\r\n  }\r\n}\r\n\r\nconst Page = (props) => {\r\n\r\n  const [state, dispatch] = useReducer(PageReducer, initialState);\r\n\r\n  useEffect(() => {\r\n    props.getPokemons().then(action => {\r\n      if (action.error) {\r\n        dispatch(PageActions.setError(acion.payload.message))\r\n      }\r\n\r\n      const searchString = hardtack.get('searchString')\r\n      const { pokemonsById, pokemonsAllIds } = props\r\n\r\n      if (!searchString) {\r\n        dispatch(PageActions.reset(pokemonsAllIds))\r\n      }\r\n\r\n      const pokemonsIds = pokemonsAllIds.filter(pokemonId => {\r\n        const pokemon = pokemonsById[pokemonId]\r\n\r\n        return pokemon.name.includes(searchString)\r\n      })\r\n\r\n      dispatch(PageActions.update({ids : pokemonsIds, searchString : searchString}))\r\n    })\r\n\r\n    ga.pageview(window.location.pathname + window.location.search)\r\n  });\r\n\r\n  const handleSearch = e => {\r\n    const { target, currentTarget } = e;\r\n\r\n    const value = currentTarget.value.toLowerCase().trim()\r\n    const { pokemonsById, pokemonsAllIds } = props\r\n\r\n    hardtack.set('searchString', value, {\r\n      maxAge: '31536000'\r\n    })\r\n\r\n    if (value === '') {\r\n      dispatch(PageActions.update)\r\n      \r\n      dispatch(PageActions.update({ids : pokemonsIds, searchString : searchString}))\r\n\r\n    }\r\n\r\n    const pokemonsIds = pokemonsAllIds.filter(pokemonId => {\r\n      const pokemon = pokemonsById[pokemonId]\r\n\r\n      return pokemon.name.includes(value)\r\n    })\r\n\r\n    dispatch(PageActions.update({ids : pokemonsIds, searchString : value}))\r\n  }\r\n\r\n\r\n  const { searchString, pokemonsIds, error } = state\r\n  const { isFetched } = props\r\n\r\n  const pokemons = pokemonsIds.map(pokemonId => {\r\n    return (\r\n      <li className=\"pokemons__item\" key={pokemonId}>\r\n        <Pokemon id={pokemonId} />\r\n      </li>\r\n    )\r\n  })\r\n\r\n  return (\r\n    <div className=\"page\">\r\n      {error && <div className=\"page__error\">{error}</div>}\r\n      <div className=\"page__search\">\r\n        <Search onChange={handleSearch} value={searchString} />\r\n      </div>\r\n      {isFetched ? (\r\n        <p>Loading...</p>\r\n      ) : (\r\n          <ul className=\"pokemons\">{pokemons}</ul>\r\n        )}\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default Page\r\n"]},"metadata":{},"sourceType":"module"}